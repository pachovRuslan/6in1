{"ast":null,"code":"import _slicedToArray from\"D:/.vscode/6in1/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{Block}from'./Block';import'./currencyConvertor.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _React$useState=React.useState('BYN'),_React$useState2=_slicedToArray(_React$useState,2),formCurrency=_React$useState2[0],setFromCurrency=_React$useState2[1];var _React$useState3=React.useState('USD'),_React$useState4=_slicedToArray(_React$useState3,2),toCurrency=_React$useState4[0],setToCurrency=_React$useState4[1];var ratesRef=React.useRef({});var _React$useState5=React.useState(0),_React$useState6=_slicedToArray(_React$useState5,2),formPrice=_React$useState6[0],setFromPrice=_React$useState6[1];var _React$useState7=React.useState(1),_React$useState8=_slicedToArray(_React$useState7,2),toPrice=_React$useState8[0],setToPrice=_React$useState8[1];React.useEffect(function(){fetch('https://cdn.cur.su/api/latest.json').then(function(res){return res.json();}).then(function(json){ratesRef.current=json.rates;onChangeToPrice(1);}).catch(function(err){console.warn(err);alert('error');});},[]);var onChangeFromPrice=function onChangeFromPrice(value){var price=value/ratesRef.current[formCurrency];var result=price*ratesRef.current[toCurrency];setToPrice(result.toFixed(3));setFromPrice(value);};var onChangeToPrice=function onChangeToPrice(value){var result=ratesRef.current[formCurrency]/ratesRef.current[toCurrency]*value;setFromPrice(result.toFixed(3));setToPrice(value);};React.useEffect(function(){onChangeFromPrice(formPrice);},[formCurrency]);React.useEffect(function(){onChangeToPrice(toPrice);},[toCurrency]);return/*#__PURE__*/_jsx(\"div\",{className:\"body_currencyConvertor\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"currencyConvertor\",children:[/*#__PURE__*/_jsx(Block,{value:formPrice,currency:formCurrency,onChangeValue:onChangeFromPrice,onChangeCurrency:setFromCurrency}),/*#__PURE__*/_jsx(Block,{value:toPrice,currency:toCurrency,onChangeValue:onChangeToPrice,onChangeCurrency:setToCurrency})]})});}export default App;","map":{"version":3,"names":["React","Block","App","useState","formCurrency","setFromCurrency","toCurrency","setToCurrency","ratesRef","useRef","formPrice","setFromPrice","toPrice","setToPrice","useEffect","fetch","then","res","json","current","rates","onChangeToPrice","catch","err","console","warn","alert","onChangeFromPrice","value","price","result","toFixed"],"sources":["D:/.vscode/6in1/src/pages/currencyConvertor/CurrencyConvertor.jsx"],"sourcesContent":["import React from 'react';\r\nimport { Block } from './Block';\r\nimport './currencyConvertor.scss';\r\n\r\nfunction App() {\r\n  const [formCurrency, setFromCurrency] = React.useState('BYN');\r\n  const [toCurrency, setToCurrency] = React.useState('USD');\r\n  const ratesRef = React.useRef({});\r\n  const [formPrice, setFromPrice] = React.useState(0);\r\n  const [toPrice, setToPrice] = React.useState(1);\r\n  React.useEffect(() => {\r\n    fetch('https://cdn.cur.su/api/latest.json')\r\n      .then((res) => res.json())\r\n      .then((json) => {\r\n       ratesRef.current = json.rates;\r\nonChangeToPrice(1)\r\n      })\r\n      .catch((err) => {\r\n        console.warn(err);\r\n        alert('error');\r\n      });\r\n  }, []);\r\n  const onChangeFromPrice = (value) => {\r\n    const price = value /  ratesRef.current[formCurrency];\r\n    const result = price *  ratesRef.current[toCurrency];\r\n    setToPrice(result.toFixed(3));\r\n    setFromPrice(value);\r\n  };\r\n  const onChangeToPrice = (value) => {\r\n    const result = ( ratesRef.current[formCurrency] /  ratesRef.current[toCurrency]) * value;\r\n    setFromPrice(result.toFixed(3));\r\n    setToPrice(value);\r\n  };\r\n  React.useEffect(() => {\r\n    onChangeFromPrice(formPrice);\r\n  }, [formCurrency]);\r\n  React.useEffect(() => {\r\n    onChangeToPrice(toPrice);\r\n  }, [toCurrency]);\r\n  return (\r\n    <div className=\"body_currencyConvertor\">\r\n      <div className=\"currencyConvertor\">\r\n        <Block\r\n          value={formPrice}\r\n          currency={formCurrency}\r\n          onChangeValue={onChangeFromPrice}\r\n          onChangeCurrency={setFromCurrency}\r\n        />\r\n        <Block\r\n          value={toPrice}\r\n          currency={toCurrency}\r\n          onChangeValue={onChangeToPrice}\r\n          onChangeCurrency={setToCurrency}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"qGAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,OAASC,KAAT,KAAsB,SAAtB,CACA,MAAO,0BAAP,C,wFAEA,QAASC,IAAT,EAAe,CACb,oBAAwCF,KAAK,CAACG,QAAN,CAAe,KAAf,CAAxC,oDAAOC,YAAP,qBAAqBC,eAArB,qBACA,qBAAoCL,KAAK,CAACG,QAAN,CAAe,KAAf,CAApC,qDAAOG,UAAP,qBAAmBC,aAAnB,qBACA,GAAMC,SAAQ,CAAGR,KAAK,CAACS,MAAN,CAAa,EAAb,CAAjB,CACA,qBAAkCT,KAAK,CAACG,QAAN,CAAe,CAAf,CAAlC,qDAAOO,SAAP,qBAAkBC,YAAlB,qBACA,qBAA8BX,KAAK,CAACG,QAAN,CAAe,CAAf,CAA9B,qDAAOS,OAAP,qBAAgBC,UAAhB,qBACAb,KAAK,CAACc,SAAN,CAAgB,UAAM,CACpBC,KAAK,CAAC,oCAAD,CAAL,CACGC,IADH,CACQ,SAACC,GAAD,QAASA,IAAG,CAACC,IAAJ,EAAT,EADR,EAEGF,IAFH,CAEQ,SAACE,IAAD,CAAU,CACfV,QAAQ,CAACW,OAAT,CAAmBD,IAAI,CAACE,KAAxB,CACPC,eAAe,CAAC,CAAD,CAAf,CACO,CALH,EAMGC,KANH,CAMS,SAACC,GAAD,CAAS,CACdC,OAAO,CAACC,IAAR,CAAaF,GAAb,EACAG,KAAK,CAAC,OAAD,CAAL,CACD,CATH,EAUD,CAXD,CAWG,EAXH,EAYA,GAAMC,kBAAiB,CAAG,QAApBA,kBAAoB,CAACC,KAAD,CAAW,CACnC,GAAMC,MAAK,CAAGD,KAAK,CAAIpB,QAAQ,CAACW,OAAT,CAAiBf,YAAjB,CAAvB,CACA,GAAM0B,OAAM,CAAGD,KAAK,CAAIrB,QAAQ,CAACW,OAAT,CAAiBb,UAAjB,CAAxB,CACAO,UAAU,CAACiB,MAAM,CAACC,OAAP,CAAe,CAAf,CAAD,CAAV,CACApB,YAAY,CAACiB,KAAD,CAAZ,CACD,CALD,CAMA,GAAMP,gBAAe,CAAG,QAAlBA,gBAAkB,CAACO,KAAD,CAAW,CACjC,GAAME,OAAM,CAAKtB,QAAQ,CAACW,OAAT,CAAiBf,YAAjB,EAAkCI,QAAQ,CAACW,OAAT,CAAiBb,UAAjB,CAApC,CAAoEsB,KAAnF,CACAjB,YAAY,CAACmB,MAAM,CAACC,OAAP,CAAe,CAAf,CAAD,CAAZ,CACAlB,UAAU,CAACe,KAAD,CAAV,CACD,CAJD,CAKA5B,KAAK,CAACc,SAAN,CAAgB,UAAM,CACpBa,iBAAiB,CAACjB,SAAD,CAAjB,CACD,CAFD,CAEG,CAACN,YAAD,CAFH,EAGAJ,KAAK,CAACc,SAAN,CAAgB,UAAM,CACpBO,eAAe,CAACT,OAAD,CAAf,CACD,CAFD,CAEG,CAACN,UAAD,CAFH,EAGA,mBACE,YAAK,SAAS,CAAC,wBAAf,uBACE,aAAK,SAAS,CAAC,mBAAf,wBACE,KAAC,KAAD,EACE,KAAK,CAAEI,SADT,CAEE,QAAQ,CAAEN,YAFZ,CAGE,aAAa,CAAEuB,iBAHjB,CAIE,gBAAgB,CAAEtB,eAJpB,EADF,cAOE,KAAC,KAAD,EACE,KAAK,CAAEO,OADT,CAEE,QAAQ,CAAEN,UAFZ,CAGE,aAAa,CAAEe,eAHjB,CAIE,gBAAgB,CAAEd,aAJpB,EAPF,GADF,EADF,CAkBD,CAED,cAAeL,IAAf"},"metadata":{},"sourceType":"module"}